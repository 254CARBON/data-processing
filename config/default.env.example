# 254Carbon Data Processing Environment Configuration
# Copy this file to .env and customize for your environment

# Environment
DATA_PROC_ENV=local
DATA_PROC_TENANT_ID=default

# Kafka Configuration
DATA_PROC_KAFKA_BOOTSTRAP=localhost:9092
DATA_PROC_KAFKA_AUTO_OFFSET_RESET=latest
DATA_PROC_KAFKA_AUTO_COMMIT=true
DATA_PROC_KAFKA_MAX_POLL_RECORDS=500
DATA_PROC_KAFKA_SESSION_TIMEOUT_MS=30000

# ClickHouse Configuration
DATA_PROC_CLICKHOUSE_URL=http://localhost:8123
DATA_PROC_CLICKHOUSE_DATABASE=data_processing

# PostgreSQL Configuration
DATA_PROC_POSTGRES_DSN=postgresql://postgres:postgres@localhost:5432/data_proc

# Redis Configuration
DATA_PROC_REDIS_URL=redis://localhost:6379/0

# Observability Configuration
DATA_PROC_LOG_LEVEL=info
DATA_PROC_TRACE_ENABLED=true
DATA_PROC_METRICS_PORT=9090
DATA_PROC_HEALTH_PORT=8080

# Service-specific Configuration

# Normalization Service
DATA_PROC_NORMALIZATION_MAX_BATCH_SIZE=1000
DATA_PROC_NORMALIZATION_TIMEOUT=30
DATA_PROC_NORMALIZATION_VALIDATION_ENABLED=true
DATA_PROC_NORMALIZATION_PRICE_SPIKE_THRESHOLD=0.1
DATA_PROC_NORMALIZATION_VOLUME_SPIKE_THRESHOLD=0.5
DATA_PROC_NORMALIZATION_MAX_PRICE=10000.0
DATA_PROC_NORMALIZATION_MIN_PRICE=0.0

# Enrichment Service
DATA_PROC_ENRICHMENT_MAX_BATCH_SIZE=1000
DATA_PROC_ENRICHMENT_TIMEOUT=30
DATA_PROC_ENRICHMENT_CACHE_ENABLED=true
DATA_PROC_ENRICHMENT_CACHE_TTL=300
DATA_PROC_ENRICHMENT_TAXONOMY_REFRESH_INTERVAL=3600
DATA_PROC_ENRICHMENT_METADATA_REFRESH_INTERVAL=1800
DATA_PROC_ENRICHMENT_CONFIDENCE_THRESHOLD=0.8
DATA_PROC_ENRICHMENT_MAX_CLASSIFICATION_TIME=5.0

# Aggregation Service
DATA_PROC_AGGREGATION_MAX_BATCH_SIZE=1000
DATA_PROC_AGGREGATION_TIMEOUT=30
DATA_PROC_AGGREGATION_BAR_INTERVALS=5m,1h
DATA_PROC_AGGREGATION_CURVE_REBUILD_THREADS=4
DATA_PROC_AGGREGATION_WATERMARK_DELAY=300
DATA_PROC_AGGREGATION_LATE_DATA_THRESHOLD=600

# Projection Service
DATA_PROC_PROJECTION_MAX_BATCH_SIZE=1000
DATA_PROC_PROJECTION_TIMEOUT=30
DATA_PROC_PROJECTION_REFRESH_INTERVAL=10
DATA_PROC_PROJECTION_CACHE_TTL=300
DATA_PROC_PROJECTION_INVALIDATION_ENABLED=true
DATA_PROC_PROJECTION_RECONCILIATION_INTERVAL=3600

# Common Processing Configuration
DATA_PROC_MAX_BATCH_SIZE=1000
DATA_PROC_PROCESSING_TIMEOUT=30

# Development Configuration
DATA_PROC_DEV_MODE=true
DATA_PROC_DEV_RELOAD=true
DATA_PROC_DEV_DEBUG=false

# Testing Configuration
DATA_PROC_TEST_MODE=false
DATA_PROC_TEST_DATA_DIR=./test_data
DATA_PROC_TEST_TIMEOUT=60

# Security Configuration (for production)
DATA_PROC_SECURITY_ENABLED=false
DATA_PROC_JWT_SECRET=your-jwt-secret-here
DATA_PROC_ENCRYPTION_KEY=your-encryption-key-here

# Audit Logging Configuration
DATA_PROC_AUDIT_ENABLED=false
DATA_PROC_AUDIT_TABLE=audit_events
DATA_PROC_AUDIT_QUEUE_SIZE=5000
DATA_PROC_AUDIT_BATCH_SIZE=200
DATA_PROC_AUDIT_FLUSH_INTERVAL=2.0
DATA_PROC_AUDIT_CLICKHOUSE_TIMEOUT=30
DATA_PROC_AUDIT_CLICKHOUSE_MAX_CONN=4
DATA_PROC_AUDIT_KAFKA_TOPIC=
DATA_PROC_AUDIT_KAFKA_BATCH_SIZE=100
DATA_PROC_AUDIT_KAFKA_FLUSH_TIMEOUT=1.0
DATA_PROC_AUDIT_KAFKA_RETRY_BACKOFF_MS=100
DATA_PROC_AUDIT_KAFKA_MAX_RETRIES=3
DATA_PROC_NORMALIZATION_AUDIT_ENABLED=false
DATA_PROC_ENRICHMENT_AUDIT_ENABLED=false
DATA_PROC_AGGREGATION_AUDIT_ENABLED=false
DATA_PROC_PROJECTION_AUDIT_ENABLED=false

# Monitoring Configuration
DATA_PROC_MONITORING_ENABLED=true
DATA_PROC_METRICS_ENDPOINT=/metrics
DATA_PROC_HEALTH_ENDPOINT=/health
DATA_PROC_READINESS_ENDPOINT=/health/ready
DATA_PROC_LIVENESS_ENDPOINT=/health/live

# Alerting Configuration
DATA_PROC_ALERTING_ENABLED=false
DATA_PROC_ALERT_WEBHOOK_URL=
DATA_PROC_ALERT_SLACK_WEBHOOK=
DATA_PROC_ALERT_EMAIL_SMTP_HOST=
DATA_PROC_ALERT_EMAIL_SMTP_PORT=587
DATA_PROC_ALERT_EMAIL_SMTP_USER=
DATA_PROC_ALERT_EMAIL_SMTP_PASSWORD=
DATA_PROC_ALERT_EMAIL_FROM=
DATA_PROC_ALERT_EMAIL_TO=
